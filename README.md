# ToDoTask
App for processing tasks from json file.

## Requirements
- php 8.0
- phpunit 10

## Installation
Add to your composer.json:
```
"require": {
        "damian/todotask": "dev-prime"
    },
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/DamianLukasik/ToDoTask.git"
        }
    ],
```
Execute the command in the console:
```
composer update
```
The app will be downloaded to your project.

For example:
- Laravel
- Symfony

## Application structure
- src/classes - the most important application classes
- src/logs/app.log - application operation logs
- src/logs/error.log - application error logs
- src/results - processed tasks generated by applications by guidelines
- src/guidelines.php - guidelines according to which tasks are to be processed
- tests - unit test suites needed for phpunit
- phpunit.xml - a configuration file used by PHPUnit, a testing framework for PHP, to specify settings and options for running test suites
- ToDoTask.php - The application control center. This is where applications can be launched

## Use
The application control center is in the ToDoTask.php file. Applications can be execute with a command:
```
php ToDoTask.php [filename.json]
```
We recommend an alias to run the app:
```
alias todotask="php ToDoTask.php"
```
The project contains two sample files
- recruitment-task-source.json
- empty_file.txt

After execute the command, a summary of the app's operation is displayed

## Additional options
Additional options can be used when execute the command:
```
-s --show
```
Shows the contents of the input file
```
-r --regenerate
```
Files are deleted and recreated in catalog `src/results`
```
-rpn --requiredPhoneNumber
```
Validates phone numbers in messages, only processes tasks with a valid phone number
```
-id --ignoreDuplicate
```
Does not delete duplicates
```
-sh --shortSummary
```
Show a shortened version of the summary

## Test
Unit tests located in the `tests` directory are used to test the application. The application uses the PHPUnit 10 framework.

After download PHPUnit by `composer update` inside the application root directory, we can test this app by command:
```
./vendor/bin/phpunit
```

After all unit tests are done, you should see a summary in the console:
for example:
```
OK (24 tests, 116 assertions)
```
PHPUnit located in the `vendor` directory.

During testing, application operation logs are added and saved in the `logs` directory.

Processed tasks are added to the result files, in order to regenerate the files before starting the application, it is recommended to add the `-r` option to the command.

## Idea of a solution
The application was created in such a way that it is possible to easily develop applications by adding new types of processed tasks, new input files to be processed, modify guidelines in the guidelines.php file, test using unit tests, analyze application operation logs.

To add a new type of processed task is enough:
- create a new class that inherits from the Entity class
- write its new fields, methods, private helper functions, `check`, `processTask` and `convertToArray` methods.

* `check` - Method checking the similarity of the entered task with it. Returns the points obtained by the task, thanks to which the class Classifier classifies them to the appropriate type of the processed task.
* `processTask` - Processes the task by validating the phone number, checking the date, setting the status, etc.
* `convertToArray` - Converts object to an array and returns it

- in the guidelines.php file we add our New_class:
```
require_once __DIRAPP__ . 'classes/New_class.php';
$new_class= new New_class();
$new_class->setFiletype('json');
$classifier->addEntity($new_class);
```
and
```
$guidelines = array(
  (...)
  'output' => array(
    'classifier' => $classifier,
    'results' => array(
      $new_class->getType() => $new_class,
      (...)
    )
  ),
  (...)
);
```
- and write unit tests :)

## Author
Damian ≈Åukasik
PHP Developer
18.06.2023

